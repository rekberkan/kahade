// Transaction and Escrow models

model Transaction {
  id          String            @id @default(uuid())
  title       String
  description String?
  amount      Decimal           @db.Decimal(15, 2)
  currency    String            @default("IDR")
  status      TransactionStatus @default(PENDING)
  
  // Blockchain integration
  blockchainTxHash String?
  
  // Payment tracking
  paymentId   String?
  paidAt      DateTime?
  completedAt DateTime?
  cancelledAt DateTime?
  refundedAt  DateTime?
  
  // Participants
  buyerId  String
  buyer    User   @relation("BuyerTransactions", fields: [buyerId], references: [id])
  sellerId String
  seller   User   @relation("SellerTransactions", fields: [sellerId], references: [id])
  
  // Relations
  disputes Dispute[]
  
  // Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([buyerId])
  @@index([sellerId])
  @@index([status])
  @@map("transactions")
}
